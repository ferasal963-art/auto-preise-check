<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Auto Preise Check ‚Äì Preisrechner</title>
  <style>
    body{font-family:Arial,sans-serif;background:#eef2f5;margin:0}
    header{background:#0d47a1;color:#fff;padding:22px;text-align:center}
    .container{max-width:980px;margin:24px auto;background:#fff;padding:22px;border-radius:12px;box-shadow:0 4px 12px rgba(0,0,0,.1)}
    .grid{display:grid;grid-template-columns:1fr;gap:14px}
    @media (min-width:900px){.grid{grid-template-columns:1fr 1fr}}
    .card{border:1px solid #e5e7eb;border-radius:12px;padding:16px;background:#fff}
    .card h2{margin:0 0 10px 0;font-size:18px}
    label{display:block;font-size:13px;color:#475467;margin:10px 0 6px}
    input,select{width:100%;padding:12px;border:1px solid #d0d5dd;border-radius:10px;font-size:16px}
    .btn{margin-top:14px;width:100%;padding:12px 18px;background:#0d47a1;color:#fff;border:none;border-radius:10px;font-size:16px;cursor:pointer}
    .btn:hover{background:#08306b}
    .muted{color:#667085;font-size:14px;line-height:1.35}
    .pill{display:inline-block;padding:7px 10px;border-radius:999px;background:#f2f4f7;font-size:13px}
    .big{font-size:28px;font-weight:800;margin:6px 0}
    .row{display:flex;gap:10px;flex-wrap:wrap;align-items:center}
    .ok{color:green;font-weight:700}
    .warn{color:#b42318;font-weight:700}
    .table{width:100%;border-collapse:collapse;margin-top:10px}
    .table td{padding:8px 0;border-bottom:1px solid #eef2f5}
    footer{text-align:center;color:#777;padding:18px}
    details{margin-top:10px}
    summary{cursor:pointer;color:#0d47a1;font-weight:700}
  </style>
</head>

<body>
<header>
  <h1>üöó Auto Preise Check</h1>
  <p>Fahrzeugdaten eingeben ‚Üí Marktpreis-Sch√§tzung + H√§ndler-Zielpreis</p>
</header>

<div class="container">
  <div class="row" style="justify-content:space-between;margin-bottom:10px">
    <span class="pill">‚úÖ Eingabe: Modell, Baujahr, KM, Zustand</span>
    <span class="pill">üíº Ergebnis: Marktpreis + Ankauf-Zielpreis</span>
  </div>

  <div class="grid">
    <div class="card">
      <h2>üì• Fahrzeug eingeben</h2>

      <label>Marke</label>
      <select id="brand">
        <option>BMW</option>
        <option>Audi</option>
        <option>Mercedes</option>
        <option>Volkswagen</option>
        <option>Opel</option>
        <option>Ford</option>
        <option>Toyota</option>
        <option>Skoda</option>
      </select>

      <label>Modell (Beispiel: 3er, A4, C-Klasse, Golf)</label>
      <input id="model" placeholder="z.B. 3er" />

      <label>Baujahr</label>
      <input id="year" type="number" placeholder="z.B. 2018" />

      <label>Kilometerstand</label>
      <input id="km" type="number" placeholder="z.B. 85000" />

      <label>Getriebe</label>
      <select id="trans">
        <option value="auto">Automatik</option>
        <option value="man">Manuell</option>
      </select>

      <label>Kraftstoff</label>
      <select id="fuel">
        <option value="diesel">Diesel</option>
        <option value="petrol">Benzin</option>
        <option value="hybrid">Hybrid</option>
        <option value="ev">Elektro</option>
      </select>

      <label>Zustand</label>
      <select id="cond">
        <option value="good">Sehr gut</option>
        <option value="ok">Gut / normal</option>
        <option value="needs">M√§ngel / Reparaturen</option>
      </select>

      <label>Unfallfrei?</label>
      <select id="accident">
        <option value="yes">Ja</option>
        <option value="no">Nein / unbekannt</option>
      </select>

      <button class="btn" onclick="calc()">Preis berechnen</button>

      <p class="muted" style="margin-top:12px">
        Hinweis: Das ist eine <b>Sch√§tzung</b> anhand typischer Wertkurven. F√ºr echte Live-Marktpreise
        (AutoScout24/Mobile/DAT/Schwacke) brauchen wir sp√§ter eine Datenquelle/API.
      </p>

      <details class="muted">
        <summary>Wie wird gerechnet?</summary>
        <div style="margin-top:8px">
          - Basiswert nach Marke/Modellklasse<br/>
          - Altersabschlag pro Jahr<br/>
          - KM-Abschlag pro 10.000 km<br/>
          - Zuschl√§ge/Abschl√§ge: Automatik, Kraftstoff, Zustand, Unfall<br/>
          - H√§ndler-Zielpreis = Marktpreis minus Marge (standard 12‚Äì18%) minus Sicherheits-Puffer
        </div>
      </details>
    </div>

    <div class="card">
      <h2>üìä Ergebnis</h2>

      <div id="resultEmpty" class="muted">
        Gib links die Daten ein und klicke auf <b>Preis berechnen</b>.
      </div>

      <div id="resultBox" style="display:none">
        <div class="muted">Gesch√§tzter Marktpreis (Privat/Inserat):</div>
        <div class="big" id="marketPrice">‚Äì</div>

        <div class="muted" style="margin-top:10px">Empfohlener H√§ndler-Ankauf (dein Zielpreis):</div>
        <div class="big" id="buyPrice">‚Äì</div>

        <div class="muted" style="margin-top:10px">Einsch√§tzung:</div>
        <div id="verdict" class="ok">‚Äì</div>

        <table class="table muted">
          <tr><td>Alter</td><td id="ageLine" style="text-align:right">‚Äì</td></tr>
          <tr><td>KM-Faktor</td><td id="kmLine" style="text-align:right">‚Äì</td></tr>
          <tr><td>Zustand/Unfall</td><td id="condLine" style="text-align:right">‚Äì</td></tr>
          <tr><td>Zu-/Abschl√§ge</td><td id="adjLine" style="text-align:right">‚Äì</td></tr>
        </table>

        <p class="muted" style="margin-top:10px">
          üí° Tipp: Wenn du ein Angebot <b>unter deinem Ankauf-Zielpreis</b> findest, ist das meist ein gutes ‚Äúg√ºnstig einkaufen‚Äù Signal.
        </p>
      </div>
    </div>
  </div>
</div>

<footer>¬© 2026 Auto Preise Check</footer>

<script>
  // Sehr grobe Basiswerte (nur Demo). Sp√§ter ersetzen wir das durch echte Datenquelle.
  // "modelClass" wird aus Modelltext grob gesch√§tzt, damit du ohne riesige Datenbank starten kannst.
  const brandBase = {
    "BMW": 25000, "Audi": 24000, "Mercedes": 26000, "Volkswagen": 20000,
    "Opel": 16000, "Ford": 17000, "Toyota": 18500, "Skoda": 17500
  };

  function guessModelMultiplier(modelText){
    const m = (modelText || "").toLowerCase();
    // kleine Heuristik nach Modellnamen
    if (m.includes("golf") || m.includes("a3") || m.includes("1er") || m.includes("corsa") || m.includes("focus")) return 0.85;
    if (m.includes("a4") || m.includes("3er") || m.includes("c-klasse") || m.includes("passat") || m.includes("octavia")) return 1.00;
    if (m.includes("a6") || m.includes("5er") || m.includes("e-klasse") || m.includes("superb")) return 1.20;
    if (m.includes("x5") || m.includes("q7") || m.includes("gle") || m.includes("touareg")) return 1.35;
    return 1.00;
  }

  function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }
  function eur(x){ return Math.round(x).toLocaleString("de-DE") + " ‚Ç¨"; }

  function calc(){
    const brand = document.getElementById("brand").value;
    const model = document.getElementById("model").value.trim();
    const year = Number(document.getElementById("year").value);
    const km = Number(document.getElementById("km").value);
    const trans = document.getElementById("trans").value;
    const fuel = document.getElementById("fuel").value;
    const cond = document.getElementById("cond").value;
    const accident = document.getElementById("accident").value;

    const nowYear = new Date().getFullYear();

    if(!model || !year || year < 1990 || year > nowYear || !km || km < 0){
      alert("Bitte Modell, Baujahr (g√ºltig) und Kilometerstand eingeben.");
      return;
    }

    // 1) Basis
    let base = (brandBase[brand] || 20000) * guessModelMultiplier(model);

    // 2) Alter
    const age = nowYear - year;
    // Altersabschlag: in den ersten Jahren st√§rker, danach flacher
    let ageFactor = Math.pow(0.88, clamp(age, 0, 20)); // pro Jahr ~ -12%
    ageFactor = clamp(ageFactor, 0.15, 1);

    // 3) Kilometer
    // 10k km √ºber 60k -> Abschlag, unter 60k -> leicht positiv
    const kmOver = km - 60000;
    let kmFactor = 1.0;
    if (kmOver > 0) {
      kmFactor -= (kmOver / 10000) * 0.018; // ~ -1.8% pro 10k √ºber 60k
    } else {
      kmFactor += (Math.abs(kmOver) / 10000) * 0.006; // ~ +0.6% pro 10k unter 60k
    }
    kmFactor = clamp(kmFactor, 0.55, 1.15);

    // 4) Anpassungen
    let adj = 0;

    // Getriebe
    if(trans === "auto") adj += 0.03; else adj -= 0.01;

    // Kraftstoff (sehr grob, markt/regionabh√§ngig)
    if(fuel === "diesel") adj += 0.01;
    if(fuel === "petrol") adj += 0.00;
    if(fuel === "hybrid") adj += 0.03;
    if(fuel === "ev") adj += 0.02;

    // Zustand
    if(cond === "good") adj += 0.03;
    if(cond === "ok") adj += 0.00;
    if(cond === "needs") adj -= 0.10;

    // Unfall
    if(accident === "no") adj -= 0.08;

    // 5) Marktpreis-Sch√§tzung
    let market = base * ageFactor * kmFactor * (1 + adj);

    // realistischer Boden
    market = Math.max(market, 1200);

    // 6) H√§ndler-Zielpreis (damit du g√ºnstiger einkaufst)
    // Je nach Segment lieber 12‚Äì18% unter Markt + Puffer
    const margin = (market > 25000) ? 0.14 : 0.17; // teurer -> geringere %, g√ºnstiger -> h√∂here %
    const riskBuffer = 700; // pauschal, kann man sp√§ter dynamisch machen (z.B. nach Zustand/KM)
    let buy = market * (1 - margin) - riskBuffer;
    buy = Math.max(buy, 600);

    // 7) Anzeige
    document.getElementById("resultEmpty").style.display = "none";
    document.getElementById("resultBox").style.display = "block";

    document.getElementById("marketPrice").textContent = eur(market);
    document.getElementById("buyPrice").textContent = eur(buy);

    const verdictEl = document.getElementById("verdict");
    // Wenn Zustand schlecht oder Unfall: Hinweis
    if(cond === "needs" || accident === "no"){
      verdictEl.textContent = "‚ö†Ô∏è Vorsicht: Zustand/Unfall dr√ºckt den Wert stark ‚Äì Ankauf nur mit Pr√ºfung.";
      verdictEl.className = "warn";
    } else {
      verdictEl.textContent = "‚úÖ Nutze den H√§ndler-Zielpreis als Grenze: darunter ist es oft ein gutes Schn√§ppchen.";
      verdictEl.className = "ok";
    }

    document.getElementById("ageLine").textContent = `${age} Jahre (Faktor ${ageFactor.toFixed(2)})`;
    document.getElementById("kmLine").textContent = `${km.toLocaleString("de-DE")} km (Faktor ${kmFactor.toFixed(2)})`;

    const condTxt = (cond==="good"?"Sehr gut":cond==="ok"?"Normal":"M√§ngel") + (accident==="no"?" + Unfall/unklar":" + Unfallfrei");
    document.getElementById("condLine").textContent = condTxt;

    const adjPct = Math.round(adj * 100);
    document.getElementById("adjLine").textContent = `${adjPct >= 0 ? "+" : ""}${adjPct}%`;
  }
</script>
</body>
</html>
